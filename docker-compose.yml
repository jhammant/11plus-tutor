# Docker Compose for 11+ Tutor Application
# Usage: docker compose up -d

services:
  11plus-tutor:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: 11plus-tutor
    ports:
      - "3783:3783"   # Frontend
      - "8002:8002"   # Backend API
    volumes:
      # Persist database across container restarts
      - tutor-data:/app/data
    environment:
      # Optional: Configure LLM (uncomment and set your values)
      # - LLM_BINDING=openai
      # - LLM_HOST=http://host.docker.internal:1234/v1
      # - LLM_MODEL=local-model
      # - LLM_API_KEY=lm-studio
      - PYTHONUNBUFFERED=1
    restart: unless-stopped
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:3783"]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 60s

volumes:
  tutor-data:
    name: 11plus-tutor-data
